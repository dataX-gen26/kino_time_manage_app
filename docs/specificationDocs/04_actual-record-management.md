# 機能仕様書: 実績の記録・管理

- **ID**: 04
- **機能名**: 実績の記録・編集・削除
- **関連要件**: 実績管理

## 1. 機能概要

ユーザーが実際に行った活動（実績）を記録、編集、削除する機能。実績にはカテゴリを設定でき、柔軟な入力方法を提供する。

## 2. 仕様詳細

### 2.1. 実績カテゴリ管理

- ユーザーは実績に付けるカテゴリを自由に作成・編集・削除できる。
- カテゴリ設定画面（モーダルなど）で、カテゴリ名と色を設定できる。
- デフォルトで「仕事」「会議」「学習」「休憩」「プライベート」「移動」「その他」などのカテゴリを用意する。
- カテゴリ情報は`categories`テーブルに保存される。

### 2.2. 実績の入力方法① (ドラッグ&ドロップ)

1.  ユーザーが「実績」列の任意の時間帯を縦にドラッグする。
2.  ドラッグを離した時点で、その時間帯が事前入力された「実績登録モーダル」が表示される。
3.  **実績登録モーダル**: 
    - **内容**: 実績の具体的な内容（例: 「〇〇の資料作成」）を入力するテキストフィールド。
    - **開始時刻 / 終了時刻**: ドラッグした時間帯が初期値として設定されている。手動で変更も可能。
    - **カテゴリ**: カテゴリ選択ドロップダウン。ユーザーが作成したカテゴリ一覧から選択する。
    - **問題フラグ**: 「問題あり」のチェックボックス。予定外のタスクや中断が発生した場合にチェックする。
    - **保存ボタン**: 入力内容で実績を作成し、DBに保存する。
    - **キャンセルボタン**: 入力を破棄してモーダルを閉じる。
4.  保存後、実績ブロックが「実績」列の対応する時間帯に表示される。

### 2.3. 実績の入力方法② (15分単位コピー)

1.  「予定」ブロック内に、15分単位の区切り線と、各区画に「実績として記録」ボタン（アイコンなど）をマウスオーバー時に表示する。
2.  ユーザーが特定の15分間のボタンをクリックする。
3.  予定のタイトルとカテゴリ（もしGoogleカレンダー側で設定されていれば。なければデフォルトカテゴリ）を引き継いだ実績が、右側の「実績」欄の同じ時間帯に自動で作成・保存される。
4.  これにより、予定通りにタスクをこなした場合、ワンクリックで実績を記録できる。

### 2.4. 実績の編集・削除

1.  実績ブロックをクリックすると、「実績編集モーダル」（登録モーダルとほぼ同等の内容）が表示される。
2.  ユーザーは内容、時間、カテゴリ、問題フラグを修正し、「更新」ボタンで変更を保存する。
3.  モーダル内に「削除」ボタンを配置。クリックすると確認ダイアログを表示後、実績をDBから削除する。

## 3. APIエンドポイント

- `POST /api/v1/actuals`: 新しい実績を作成する。
- `PUT /api/v1/actuals/:id`: 既存の実績を更新する。
- `DELETE /api/v1/actuals/:id`: 実績を削除する。
- `GET /api/v1/categories`: カテゴリの一覧を取得する。
- `POST /api/v1/categories`: 新しいカテゴリを作成する。
- `PUT /api/v1/categories/:id`: カテゴリを更新する。
- `DELETE /api/v1/categories/:id`: カテゴリを削除する。

## 4. データモデル

- `actuals`テーブル
- `categories`テーブル
- （詳細は[データベース設計書](./07_database-design.md)を参照）
